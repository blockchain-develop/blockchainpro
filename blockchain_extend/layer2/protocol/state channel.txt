# state channel

## 区块链不可能三角

* 去中心化
* 安全
* 可扩展性

区块链需要保证去中心化和安全，只有这样，链才能实现不可被控制、可被信任，其定义的规则天然运转下去，有了这些共识，链上token才能成为货币，才能成为价值锚点。

要理解区块链为什么首先要保证去中心化和安全，就需要理解什么是货币。

有一句话"金银天然不是货币，但货币天然是金银"，这句话表明了金银成为货币是人们社会活动共同选择、共识的结果。也就是说，人们可以使用金银、也可以使用其他作为货币，只是金银非常适合做为货币，最后大家共同做出了选择。

所以，被大家广泛接受的用来做支付中介、价值存储的东西就是货币。

国家央行的法币，有国家信用背书、立法规定的必须接受的。它能成为货币，这是信用货币。

* 法币能成为货币的共识是国家信用背书和立法
* 可以通过调节货币供应量做金融调控，这是有很多问题的，信用经济是人类目前最为庞大的社会实践，他们试图通过经济手段来调节整个社会的发展。

比特币就是在这个背景下被创造出来，这是一种回归，类似黄金，不可通过手段来调节货币供应量。

在没有信用背书的区块链中要做到token被广泛接受用来做支付中介的共识，就需要通过去中心化和安全来生产信任，进而形成共识。

去中心化和安全才是区块链首要保证的，其次才是可扩展性。pow的btc和eth的崛起，追求可扩展性的EOS，ONT的没落就是最好的证明。

要想区块链上的token能共识为货币，就必须保证去中心化和安全，这是链上考虑的事情，扩展性可以留给链下考虑。

## 区块链扩展性

区块链上保证去中心化和安全，扩展性留给链下。

* BTC链保证去中心化和安全，上面运行着透明的不可篡改的既定规则，链用来形成货币的共识。不需要在链上进行应用，以BTC为价值锚点做应用。
* 不是应用都需要在ethereum上进行，ethereum链上用来形成eth的货币共识，使得eth成为价值锚点，基于价值锚点做应用。

金本位时代，黄金作为价值锚点发行纸币用于交易支付，也是类似的思想。

扩展性留在链下解决，为layer2。

## Layer2

要了解layer2就需要先来了解区块链的支付网络和结算网络之争。

* 我在微信支付中做了100笔交易，那么最后做一次体现，那么微信支付就是支付行为，而最后体现的银行就是结算行为。
* 我今天做了10笔股票的买卖，收盘后经纪公司做一次结算，登记我最终持有的股票和需要支付的人民币。
* 每天有很多银行之间的用户转账，但每天银行对银行做一次结算确定一个收支。
* 我在餐厅吃饭，先记账，消费了10笔后，和老板算一次帐，那么记账就是支付行为，而最后的一次的算账就是结算行为。
* 我在phemex交易所做了上百笔兑换交易，最后有一个账户余额，体现到链上，那么phemex交易所就是交易网络，而最后在区块链上做了一次结算。

* 一种观点认为：区块链上只需要简单的转账，用于最后的结算需求
* 一种观点认为：区块链要提高TPS，用于处理用户的支付需求

到目前为止，第一种观点已经成为区块链的共识。

链上要最大的去中心化和保证安全，只需要做简单的转账，用于最后的结算需求，其他的扩展应用留给Layer2。

那么广义的Layer2就是所有的围绕区块链的应用

* 中心化的交易所，他们处理token的兑换，最终的结果在链上结算。
* bsc，他们运行以太坊的应用，来扩展以太坊，加入信用背书、兼顾去中心化和性能。一种侧链机制。
* 状态通道，保证安全和性能。

广义的Layer2就是所有区块链的扩展应用，他们都是基于区块链做的应用扩展，在安全、性能之间做平衡选择，中心化交易所牺牲完全来满足高性能，状态通道保证安全和性能但牺牲了可用性，侧链则兼顾两者。

狭义的layer2是指解决区块链性能的解决方案，包括侧链、rollup、状态通道。

## 状态通道

状态通道是为了解决区块链可扩展性的一种Layer2解决方案，其最大特点是安全和高性能，水平扩展。

* btc能用于处理支付吗？ 确认时间，成本之高，tps低下，任何一点都是对支付需求的致命打击，ethereum也是一样。
* 再做一条高性能的链来处理支付？区块链不可能三角，要牺牲去中心化和安全，token成为货币的共识都无法完成，其次，支付tps是十万百万的tps要求。

还是让链做为结算层吧，最大的去中心化和保证安全，处理少量的结算需求，通过Layer2扩展来实现高tps用于处理支付需求。状态通道就是用来完成这件事情。







