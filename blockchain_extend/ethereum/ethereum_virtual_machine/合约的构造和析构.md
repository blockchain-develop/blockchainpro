# 合约的构造和析构

## 只有构造函数的合约
construct
```
pragma solidity 0.5.16;
contract Test1 {
    uint a;
    uint b;
    constructor(uint _a) public {
        a = _a;
        b = 20;
    }
}
```

opcode
```
0: PUSH1 0x80
1: PUSH1 0x40
2: MSTORE
3: PUSH1 0x00
4: DUP1
5: REVERT
```

## 带有功能的合约
construct
```
pragma solidity 0.5.16;
contract Test2 {
    uint a;
    uint b;
    constructor(uint _a) public {
        a = _a;
        b = 20;
    }
    function test() public {
        b = 30;
    }
}
```
opcode
```
0:  PUSH1 0x80
1:  PUSH1 0x40
2:  MSTORE
3:  CALLVALUE
4:  DUP1
5:  ISZERO
6:  PUSH1 0x0f
7:  JUMPI
8:  PUSH1 0x00
9:  DUP1
10: REVERT
11: JUMPDEST
12: POP
13: PUSH1 0x04
14: CALLDATASIZE
15: LT
16: PUSH1 0x28
17: JUMPI
18: PUSH1 0x00
19: CALLDATALOAD
20: PUSH1 0xe0
21: SHR
22: DUP1
23: PUSH4 0xf8a8fd6d
24: EQ
25: PUSH1 0x2d
26: JUMPI
27: JUMPDEST
28: PUSH1 0x00
29: DUP1
30: REVERT
31: JUMPDEST
32: PUSH1 0x33
33: PUSH1 0x35
34: JUMP
35: JUMPDEST
36: STOP
37: JUMPDEST
38: PUSH1 0x1e
39: PUSH1 0x01
40: DUP2
41: SWAP1
42: SSTORE
43: POP
44: JUMP
```

## reference

[Creating Contracts](https://solidity.readthedocs.io/en/v0.5.3/contracts.html)