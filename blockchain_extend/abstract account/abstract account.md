# account abstract


* ambier wallet
* safe

## 执行交易
* 通过EOA账户执行交易
  * 操作简单直接，链协议层就可以支持，交易由EOA账户私钥签名授权
  * 需要EOA账户支付ETH作为gas
  * 不能在同一个交易中调用多个合约，增加了dapp交互的复杂性

EOA账户以用户的操作作为参数来调用一个合约，然后这个合约执行操作验证，执行指定的操作。用户的操作(或者称为交易)就由这个合约执行了，这个合约就是用户的智能合约钱包。

* 这里面临的问题
  * 用户的操作是由一个EOA账户调用用户智能合约钱包来执行的，用户需要将用户操作发送出来，EOA账户构建调用合约交易并发送到ethereum上，那么如何发送出来？发送出来后，会由哪个EOA账户来执行呢？EOA账户为什么会支付gas来执行用户操作呢？
  * 用户需要将用户操作发送到一个mempool，mempool中包含多个用户的多个操作，mempool如何设计，是否public，是否去中心化？是否存在多个mempool，用户如何选择发送到哪个mempool？
  * bundlers提供mempool服务，接收用户操作，验证用户操作，将mempool中的多个用户的多个操作打包为一个ethereum交易，发送到链上。bundlers发送交易到ethereum链上，需要支付gas，这部分费用需要从用户收取，该如何收取？各个用户的操作是由各个用户的智能合约钱包来执行的，要么bundlers为每个用户的操作构建一个ethereum交易(调用用户的智能合约钱包)，或者bundlers构建一个ethereum交易，调用一个entry point合约，合约根据用户操作调用用户的智能合约钱包。如何排序这个ethereum交易中的用户操作呢？
  * 如果将多个用户的多个操作打包在一个ethereum交易中发送到链上，如果由用户的交易执行失败该如何处理？
  * 用户操作最终发送到用户智能合约执行，该如何验证该用户操作呢？不是任何人的操作都可以发送到用户智能合约上去执行。
  * 用户智能合约钱包又该是什么样的？用户如何创建这个智能合约钱包？用户要创建一个什么样的智能合约钱包？这需要一个智能合约钱包市场，用户选择要创建一个什么样的智能合约钱包。

* 通过合约账户执行交易
  * 合约账户是代码控制的，可以执行复杂的交易，可以在一个操作中调用多个合约，可以屏蔽dapp交互的复杂性
  * 合约账户是代码控制的，交易的授权可以自定义，可以自定义签名算法
  * 合约账户是代码控制的，可以自定义交易验证的规则
  * 通过合约账户执行交易，合约账户不需要支付ETH gas，由交易的EOA账户支付gas

## reference
 * 币安抽象账户研报[中文](https://news.marsbit.co/20230821082722042606.html) [英文](https://research.binance.com/static/pdf/a-primer-on-account-abstraction.pdf)
 * [eip4337](https://eips.ethereum.org/EIPS/eip-4337)